<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>Profile | BrightEducationSteno</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />

    <!-- Favicons -->
    <link href="assets/img/BrightEducationSteno.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <!-- Google Fonts -->
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
        rel="stylesheet" />

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet" />
    <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet" />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />

    <!--  Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet" />
    <link href="assets/css/slider.css" rel="stylesheet" />


</head>

<body>
    <!-- Designed and Developed by Sunil Barara -->
  <!--Mobile Number: 7878438668 -->
    <app-contactcareernavbar></app-contactcareernavbar> 

    <div class="section-title" style="padding-left: 4rem; padding-top: 10rem">
        <h2>User Profile</h2>
        <p>Details of User Course</p>
    </div>
    <div class="body-container">
        <div class="main-container bgc-white">
            <div role="main" class="main-content">
                <div class="page-content">
                    <style>
                        .success {
                            color: #44b267;
                        }

                        .fail {
                            color: #e81c4e;
                        }


                        /*-- special --*/
                        .special,
                        #news,
                        .w3_content_agilleinfo_inner,
                        .team-section,
                        .plans-section {
                            padding: 25px 0;
                        }

                        h3.tittle,
                        h2.ptbl-inner-h-title,
                        h3.ptbl-inner-h-title {
                            color: #e83f3f;
                            font-size: 2.5em;
                            margin: 0;
                            text-align: center;
                            font-weight: 600;
                            letter-spacing: 3px;
                        }

                        h2.ptbl-inner-h-title,
                        h3.ptbl-inner-h-title {
                            margin-bottom: 1em;
                            text-transform: uppercase;
                        }
 
                    </style>
                    <!-- Our price plan section -->
                    <div class="plans-section" style="padding:21px;overflow-x: scroll!important;">

                        <!-- -------------------------- TYping Modal Code is Here   -------------------- -->
                        <!-- Main Body Starts -->

                        <div class="container-fluid mt--6">
                            <div class="card card-profile">
                                <div class="card-header text-center border-0 pt-8 pt-md-4 pb-0 pb-md-4">
                                    <div class="d-flex justify-content-between">
                                        <a href="#" style="    background-color: #ff4a17;
                                  color: white;
                                  border-width: 0px;" data-toggle="modal" data-target="#change_pass"
                                            class="btn btn-sm btn-info  mr-4 ">Change Password</a>
                                        <div class="font-weight-300"></div>

                                    </div>
                                    <span class="h5" style="float:right!important"> Your Roll Number: <span
                                            id="StudentRollNumber">

                                        </span>
                                    </span>
                                </div>
                                <div class="card-body pt-0">
                                    <div class="text-center">
                                        <span class="pos-rel">
                                            <img style="    border-radius: 4rem!important;width:9rem"
                                                class="border-2 brc-white-tp1 radius-round"
                                                src="https://png.pngtree.com/png-vector/20191110/ourmid/pngtree-avatar-icon-profile-icon-member-login-vector-isolated-png-image_1978396.jpg">
                                            <span
                                                class="bgc-warning radius-round border-2 brc-white p-1 position-tr mr-n1px mt-n1px"></span>
                                        </span>
                                        <h3></h3>
                                        <div class="h5 mt-0">

                                            <span id="SPRNAme"></span>
                                            <br />
                                            <i class="ni business_briefcase-24 mr-2"></i>
                                            <span id="StudentPhone"></span>
                                        </div>
                                        <div id="StudentAccountType"><i class="ni education_hat mr-2"></i> </div>

                                        <br>
                                    </div>


                                    <table class="tableNewClass" style="overflow-x:auto;" border="2" width="100%">
                                        <thead>
                                            <tr>
                                                <td><b>S.No.</b></td>
                                                <td><b>Course Name</b></td>
                                                <td><b>Steno Starting Date</b></td>
                                                <td><b>Steno Expiry Date</b></td>
                                                <td><b>Status</b></td>
                                            </tr>
                                        </thead>
                                        <tbody id="TableData">


                                        </tbody>
                                    </table>


                                </div>
                            </div>
                        </div>



                    </div>
                </div>
            </div>
        </div><!-- .modal-aside -->
    </div>
    </div>
    <app-whatsapp></app-whatsapp>
    <app-footer></app-footer>
    <div id="preloader"></div>
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
            class="bi bi-arrow-up-short"></i></a>

    <script>
        function handleStartTest() {
            console.log('btn start clicked');
            var part1 = document.getElementById('datatable');
            var part2 = document.getElementById('typingModalId');
            part1.style.display = 'none';
            part2.style.display = 'inline-block';
        }
        function handleGoBack() {
            console.log('btn start clicked');
            var part1 = document.getElementById('datatable');
            var part2 = document.getElementById('typingModalId');
            part1.style.display = 'table';
            part2.style.display = 'none';
        }
    </script>
    <!-- Vendor JS Files -->
    <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>

    <script src="https://code.jquery.com/jquery-2.2.0.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick.js"></script>

    <!--   Main JS File -->
    <script defer src="assets/js/main.js"></script>
    <script src="assets/js/MyComponents.js"></script>
    <script>
        $(document).ready(function () {
            document.getElementById('header').style.backgroundColor = '#38434b'
            getStudentDetails();
            // checkIsSprStudent();
        })
        function getStudentDetails() {
            let SPR_StudentPhone = localStorage.getItem("SPR_StudentPhone")
            const TableData = document.getElementById('TableData');
            var myHeaders = new Headers();
            myHeaders.append("Content-Type", "application/json");
            myHeaders.append("Cookie", "BrowserId=g1Zrr_uOEe2gTR9C7VyOiA; CookieConsentPolicy=0:1; LSKey-c$CookieConsentPolicy=0:1");

            var raw = JSON.stringify({
                "LastName": 'lastname',
                "FirstName": 'FirstName',
                "Company": 'Company',
                //"Phone": 'Phone', // document.getElementById('phone').value,
                "Phone": SPR_StudentPhone,
                "getStudentDetails": "getStudentDetails"
            });

            var requestOptions = {
                method: 'POST',
                headers: myHeaders,
                body: raw,
                redirect: 'follow'
            };
            fetch("https://cloudcertitude15-dev-ed.develop.my.salesforce-sites.com/services/apexrest/BrightEducationSteno", requestOptions)
                .then(response => response.json())
                .then(result => {
                    if (result.includes('@')) {
                        let paidCourseLst = result.substr(0, result.indexOf('@_@'));
                        result = result.substr(result.indexOf('@_@') + 3, result.length)
                        //  console.log('paid course lst->', paidCourseLst)
                        console.log('paid course json->>', JSON.parse(paidCourseLst))
                        paidCourseLst = JSON.parse(paidCourseLst);
                        document.getElementById("StudentAccountType").innerText = 'Account Type: PAID';
                        paidCourseLst.forEach((currentItem, idx) => {
                            const createdDateString = currentItem.CreatedDate;
                            const createdDateObject = new Date(createdDateString);

                            const createdFormattedDate = createdDateObject.toLocaleDateString("en-US", {
                                month: "short",
                                day: "numeric",
                                year: "numeric",
                            });
                            const expireDateString = currentItem?.Expire_Date__c;
                            const expireDatedateObject = new Date(expireDateString);

                            const expireFormattedDate = expireDatedateObject.toLocaleDateString("en-US", {
                                month: "short",
                                day: "numeric",
                                year: "numeric",
                            });
                            let SRNo = idx + 1;
                            let active = currentItem.Active__c ? 'Active' : 'Expired'
                            const tableHTML = ` <tr>
                                                <td>${SRNo}</td>
                                                <td>${currentItem.Courses__r.Name}</td>
                                                <td>${createdFormattedDate}</td>
                                                <td>${expireFormattedDate}</td>
                                                <td>${active}</td>
                                            </tr>`;
                            TableData.innerHTML += tableHTML;
                        })
                    } else {
                        document.getElementById("StudentAccountType").innerText = 'Account Type: FREE';
                        //  result = result.substr(result.indexOf('@_@') + 3, result.length)
                    }

                    result = JSON.parse(result);
                    console.log('result profile', result)

                    document.getElementById("StudentRollNumber").innerText = 'BES_' + result.Roll_Number__c;
                    document.getElementById("StudentPhone").innerText = result.Phone__c;
                    document.getElementById("SPRNAme").innerText = result.Name;
                })
                .catch(error => console.log('error=', error));

        } 
    </script>



    <!-- include common vendor scripts used in demo pages -->
    <script src="js/jsone.js"></script>
    <script src="js/jstwo.js"></script>
    <script src="js/jsthree.js"></script>
    <script>
        document.addEventListener("contextmenu", (event) => {
            event.preventDefault();
        });
    </script>


    <!-- include ace.js -->
    <script src="dist/js/ace.min.js"></script>
    <!-- <script defer src="assets/js/main.js"></script>
    <script defer src="assets/js/MyComponents.js"></script> -->
</body>

</html>